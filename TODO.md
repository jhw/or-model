### short

- revisit integer logic

- add back AH, OU demos

### medium

- stop solver test failing occasionally

### thoughts

- add outrights positions option?
  - doesn't feel like it makes a lot of sense
- move unit tests into modules?
- why is std_training_error so high in many cases?
- why doesn't OU give a better fit?
  - is draw fitting a proxy for OU fit?
- better AH data?
  - from where?
- AH integer handicap fitting?
  - how?
- ability to constrain ratings?
  - not sure it's worth it
- remove sources dependency?
  - not sure it's worth it

### done

- re- check push logic
- separate out half, integer calculations for three quarter/quarter lines, and test
- tests for line switch helpers
- add back normalisation
- simplify quarter/three quarter line adjustments
- test removing quarter/three quarter line adjustments
- check three quarter handicaps
- remove interpolation code
- remove enforce half handicap
- add implementations for integer, quarter, three quarter hanicaps
- ask chatgpt to validate implementation
- ask chatgpt for switcher to switch between different implementations
- (line+0.5).is_integer?
- run demo again 

- AH + OU selector demo
- update scraper
- save fixtures with AH, OU
- match odds functions to use mask
- kernel calculator properties to use base function taking mask_fn
- simplify Event in main
- AH line solver
  - take the old asian_handicap_lines function
  - switch x, y axes
  - interpolate x value for y = 0.5
- explicit test for AH price ordering
- refactor AH, OU tests
- test for AH interpolation
- quarter line requests are failing
- AH interpolation
- reject integer line decorator
- AH code to use mask
- improve OU goals stuff
- add OU goals support
- add lint 
- is simulate_points correctly named?
- remove AH atm stuff
- add default options for max_iterations and n_paths
- expose max_iterations to main
- remove team_names solver options
  - adjust main
  - check demo still works
- asian_handicap_lines
- asian handicaps
- test effect on optimisation time of using ratings arg not (randomised) team names
- add demo to main 
- split tests into separate packages
- allow solver to be populated with team names or ratings but not both
- pass selector_fn to solver
- stop returning ratings
- wrap home_advantage in a class
- clean up ratings/initial ratings
- test for ratings home advantage solver, using mini- league
- dump ENG1 from fd parser
- ensure scores and prices are included
- ensure format is as solver wants it (match_odds -> prices)
- rename outrights as model
- rename api as main
- remove specification of training_data as match_odds
- add a markets test to test.py
- add and filter markets.json
- pass markets to api
- calculate market groups
- calculate positions for each market group
- return Default group as position_probabilities
- value payoff
- assert payoff versus len(matrix)
- calculate and return marks
- remove positions properties
- test position matrix sums to one
- test event normalised probs
- test remaining fixtures
- ScoreMatrix.initialise should have default n arg
- convert all metrics to float
- mean, stdev of training_errors
- position heatmaps
- update league table
- training events
- 0.1.0
- season points
- test should not need to import Event
- split api into api and test 
- check for match refs
- check all arg passing uses named args
- move event from common
- rename common as kernel
- move fetch_leagues to api
- calc_remaining fixtures can just return name
- send match name to solver not match
- surface rounds argument
- change ratings output to be a teams table
- add SimPoints.simulate(fixtures)
- ensure (eg) ratings and error outputs are prefixed by solver 
- split simulator into simulator and API
- [chatgpt] non standard payoffs 
- simulator to return list for next team
- simulator noise
- position count matrix
- test argsort
- simulate goals consistent with matrix
- update table (points, goal difference)
- add initial state
- ScoreMatrix should not have default home_advantage
- remaining fixtures function
- results fetch
- pass date to solver and have it calculate league table and remaining fixtures
- OU fitting
- script to parse FD for AH, OU data
- remove fd key
- why doesn't fd scraper seem to be returning all events?
- expected points calculation
- fix stdev field
- poisson_solver disappointing results :(
- format existing solver results vs new scipy solver
- replace solver with scipy optimise [notes]
- add mean, sd training set errors to teams
- training set isn't cutting off properly at 6 teams
- add deductions
- return table.values()
- refactor api output
- remove seed
- allow drift multiplier to be part of output
- check result.xxx references
- leagues
- pass leaguename to test.py
- better directory structure
- better interfaces
- setup.py
- get simulator test to work
- abstract kernel

